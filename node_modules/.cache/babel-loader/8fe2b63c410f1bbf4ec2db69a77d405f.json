{"ast":null,"code":"import { Generic } from './basic.mjs';\nimport { ElementView } from '../dia/ElementView.mjs';\nimport V from '../V/index.mjs';\nimport { Link as diaLink } from '../dia/Link.mjs';\nexport const Place = Generic.define('pn.Place', {\n  size: {\n    width: 50,\n    height: 50\n  },\n  attrs: {\n    '.root': {\n      r: 25,\n      fill: '#ffffff',\n      stroke: '#000000',\n      transform: 'translate(25, 25)'\n    },\n    '.label': {\n      'text-anchor': 'middle',\n      'ref-x': .5,\n      'ref-y': -20,\n      ref: '.root',\n      fill: '#000000',\n      'font-size': 12\n    },\n    '.tokens > circle': {\n      fill: '#000000',\n      r: 5\n    },\n    '.tokens.one > circle': {\n      transform: 'translate(25, 25)'\n    },\n    '.tokens.two > circle:nth-child(1)': {\n      transform: 'translate(19, 25)'\n    },\n    '.tokens.two > circle:nth-child(2)': {\n      transform: 'translate(31, 25)'\n    },\n    '.tokens.three > circle:nth-child(1)': {\n      transform: 'translate(18, 29)'\n    },\n    '.tokens.three > circle:nth-child(2)': {\n      transform: 'translate(25, 19)'\n    },\n    '.tokens.three > circle:nth-child(3)': {\n      transform: 'translate(32, 29)'\n    },\n    '.tokens.alot > text': {\n      transform: 'translate(25, 18)',\n      'text-anchor': 'middle',\n      fill: '#000000'\n    }\n  }\n}, {\n  markup: '<g class=\"rotatable\"><g class=\"scalable\"><circle class=\"root\"/><g class=\"tokens\" /></g><text class=\"label\"/></g>'\n});\nexport const PlaceView = ElementView.extend({\n  presentationAttributes: ElementView.addPresentationAttributes({\n    tokens: ['TOKENS']\n  }),\n  initFlag: ElementView.prototype.initFlag.concat(['TOKENS']),\n  confirmUpdate: function (...args) {\n    let flags = ElementView.prototype.confirmUpdate.call(this, ...args);\n\n    if (this.hasFlag(flags, 'TOKENS')) {\n      this.renderTokens();\n      this.update();\n      flags = this.removeFlag(flags, 'TOKENS');\n    }\n\n    return flags;\n  },\n  renderTokens: function () {\n    const vTokens = this.vel.findOne('.tokens').empty();\n    ['one', 'two', 'three', 'alot'].forEach(function (className) {\n      vTokens.removeClass(className);\n    });\n    var tokens = this.model.get('tokens');\n    if (!tokens) return;\n\n    switch (tokens) {\n      case 1:\n        vTokens.addClass('one');\n        vTokens.append(V('circle'));\n        break;\n\n      case 2:\n        vTokens.addClass('two');\n        vTokens.append([V('circle'), V('circle')]);\n        break;\n\n      case 3:\n        vTokens.addClass('three');\n        vTokens.append([V('circle'), V('circle'), V('circle')]);\n        break;\n\n      default:\n        vTokens.addClass('alot');\n        vTokens.append(V('text').text(tokens + ''));\n        break;\n    }\n  }\n});\nexport const Transition = Generic.define('pn.Transition', {\n  size: {\n    width: 12,\n    height: 50\n  },\n  attrs: {\n    'rect': {\n      width: 12,\n      height: 50,\n      fill: '#000000',\n      stroke: '#000000'\n    },\n    '.label': {\n      'text-anchor': 'middle',\n      'ref-x': .5,\n      'ref-y': -20,\n      ref: 'rect',\n      fill: '#000000',\n      'font-size': 12\n    }\n  }\n}, {\n  markup: '<g class=\"rotatable\"><g class=\"scalable\"><rect class=\"root\"/></g></g><text class=\"label\"/>'\n});\nexport const Link = diaLink.define('pn.Link', {\n  attrs: {\n    '.marker-target': {\n      d: 'M 10 0 L 0 5 L 10 10 z'\n    }\n  }\n});","map":{"version":3,"names":["Generic","ElementView","V","Link","diaLink","Place","define","size","width","height","attrs","r","fill","stroke","transform","ref","markup","PlaceView","extend","presentationAttributes","addPresentationAttributes","tokens","initFlag","prototype","concat","confirmUpdate","args","flags","call","hasFlag","renderTokens","update","removeFlag","vTokens","vel","findOne","empty","forEach","className","removeClass","model","get","addClass","append","text","Transition","d"],"sources":["C:/Users/Admin/dataflow-test/node_modules/jointjs/src/shapes/pn.mjs"],"sourcesContent":["import { Generic } from './basic.mjs';\nimport { ElementView } from '../dia/ElementView.mjs';\nimport V from '../V/index.mjs';\nimport { Link as diaLink } from '../dia/Link.mjs';\n\nexport const Place = Generic.define('pn.Place', {\n    size: { width: 50, height: 50 },\n    attrs: {\n        '.root': {\n            r: 25,\n            fill: '#ffffff',\n            stroke: '#000000',\n            transform: 'translate(25, 25)'\n        },\n        '.label': {\n            'text-anchor': 'middle',\n            'ref-x': .5,\n            'ref-y': -20,\n            ref: '.root',\n            fill: '#000000',\n            'font-size': 12\n        },\n        '.tokens > circle': {\n            fill: '#000000',\n            r: 5\n        },\n        '.tokens.one > circle': { transform: 'translate(25, 25)' },\n\n        '.tokens.two > circle:nth-child(1)': { transform: 'translate(19, 25)' },\n        '.tokens.two > circle:nth-child(2)': { transform: 'translate(31, 25)' },\n\n        '.tokens.three > circle:nth-child(1)': { transform: 'translate(18, 29)' },\n        '.tokens.three > circle:nth-child(2)': { transform: 'translate(25, 19)' },\n        '.tokens.three > circle:nth-child(3)': { transform: 'translate(32, 29)' },\n\n        '.tokens.alot > text': {\n            transform: 'translate(25, 18)',\n            'text-anchor': 'middle',\n            fill: '#000000'\n        }\n    }\n}, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><circle class=\"root\"/><g class=\"tokens\" /></g><text class=\"label\"/></g>',\n});\n\nexport const PlaceView = ElementView.extend({\n\n    presentationAttributes: ElementView.addPresentationAttributes({\n        tokens: ['TOKENS']\n    }),\n\n    initFlag: ElementView.prototype.initFlag.concat(['TOKENS']),\n\n    confirmUpdate: function(...args) {\n        let flags = ElementView.prototype.confirmUpdate.call(this, ...args);\n        if (this.hasFlag(flags, 'TOKENS')) {\n            this.renderTokens();\n            this.update();\n            flags = this.removeFlag(flags, 'TOKENS');\n        }\n        return flags;\n    },\n\n    renderTokens: function() {\n\n        const vTokens = this.vel.findOne('.tokens').empty();\n        ['one', 'two', 'three', 'alot'].forEach(function(className) {\n            vTokens.removeClass(className);\n        });\n\n        var tokens = this.model.get('tokens');\n        if (!tokens) return;\n\n        switch (tokens) {\n\n            case 1:\n                vTokens.addClass('one');\n                vTokens.append(V('circle'));\n                break;\n\n            case 2:\n                vTokens.addClass('two');\n                vTokens.append([V('circle'), V('circle')]);\n                break;\n\n            case 3:\n                vTokens.addClass('three');\n                vTokens.append([V('circle'), V('circle'), V('circle')]);\n                break;\n\n            default:\n                vTokens.addClass('alot');\n                vTokens.append(V('text').text(tokens + ''));\n                break;\n        }\n    }\n});\n\nexport const Transition = Generic.define('pn.Transition', {\n    size: { width: 12, height: 50 },\n    attrs: {\n        'rect': {\n            width: 12,\n            height: 50,\n            fill: '#000000',\n            stroke: '#000000'\n        },\n        '.label': {\n            'text-anchor': 'middle',\n            'ref-x': .5,\n            'ref-y': -20,\n            ref: 'rect',\n            fill: '#000000',\n            'font-size': 12\n        }\n    }\n}, {\n    markup: '<g class=\"rotatable\"><g class=\"scalable\"><rect class=\"root\"/></g></g><text class=\"label\"/>',\n});\n\nexport const Link = diaLink.define('pn.Link', {\n    attrs: { '.marker-target': { d: 'M 10 0 L 0 5 L 10 10 z' }}\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}