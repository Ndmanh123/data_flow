{"ast":null,"code":"import * as mvc from '../mvc/index.mjs';\nimport * as util from '../util/index.mjs';\nimport { CellView } from './CellView.mjs';\nimport { LayersNames } from './PaperLayer.mjs';\nimport { ToolView } from './ToolView.mjs';\nexport const ToolsView = mvc.View.extend({\n  tagName: 'g',\n  className: 'tools',\n  svgElement: true,\n  tools: null,\n  isRendered: false,\n  options: {\n    tools: null,\n    relatedView: null,\n    name: null // layer?: LayersNames.TOOLS\n    // z?: number\n\n  },\n  configure: function (options) {\n    options = util.assign(this.options, options);\n    var tools = options.tools;\n    if (!Array.isArray(tools)) return this;\n    var relatedView = options.relatedView;\n    if (!(relatedView instanceof CellView)) return this;\n    var views = this.tools = [];\n\n    for (var i = 0, n = tools.length; i < n; i++) {\n      var tool = tools[i];\n      if (!(tool instanceof ToolView)) continue;\n      tool.configure(relatedView, this);\n      this.vel.append(tool.el);\n      views.push(tool);\n    }\n\n    this.isRendered = false;\n    relatedView.requestUpdate(relatedView.getFlag('TOOLS'));\n    return this;\n  },\n  getName: function () {\n    return this.options.name;\n  },\n  update: function (opt) {\n    opt || (opt = {});\n    var tools = this.tools;\n    if (!tools) return this;\n    var isRendered = this.isRendered;\n\n    for (var i = 0, n = tools.length; i < n; i++) {\n      var tool = tools[i];\n\n      if (!isRendered) {\n        // First update executes render()\n        tool.render();\n      } else if (opt.tool !== tool.cid && tool.isVisible()) {\n        tool.update();\n      }\n    }\n\n    if (!isRendered) {\n      this.mount(); // Make sure tools are visible (if they were hidden and the tool removed)\n\n      this.blurTool();\n      this.isRendered = true;\n    }\n\n    return this;\n  },\n  focusTool: function (focusedTool) {\n    var tools = this.tools;\n    if (!tools) return this;\n\n    for (var i = 0, n = tools.length; i < n; i++) {\n      var tool = tools[i];\n\n      if (focusedTool === tool) {\n        tool.show();\n      } else {\n        tool.hide();\n      }\n    }\n\n    return this;\n  },\n  blurTool: function (blurredTool) {\n    var tools = this.tools;\n    if (!tools) return this;\n\n    for (var i = 0, n = tools.length; i < n; i++) {\n      var tool = tools[i];\n\n      if (tool !== blurredTool && !tool.isVisible()) {\n        tool.show();\n        tool.update();\n      }\n    }\n\n    return this;\n  },\n  hide: function () {\n    return this.focusTool(null);\n  },\n  show: function () {\n    return this.blurTool(null);\n  },\n  onRemove: function () {\n    var tools = this.tools;\n    if (!tools) return this;\n\n    for (var i = 0, n = tools.length; i < n; i++) {\n      tools[i].remove();\n    }\n\n    this.tools = null;\n  },\n  mount: function () {\n    const {\n      options,\n      el\n    } = this;\n    const {\n      relatedView,\n      layer = LayersNames.TOOLS,\n      z\n    } = options;\n\n    if (relatedView) {\n      if (layer) {\n        relatedView.paper.getLayerView(layer).insertSortedNode(el, z);\n      } else {\n        relatedView.el.appendChild(el);\n      }\n    }\n\n    return this;\n  }\n});","map":{"version":3,"names":["mvc","util","CellView","LayersNames","ToolView","ToolsView","View","extend","tagName","className","svgElement","tools","isRendered","options","relatedView","name","configure","assign","Array","isArray","views","i","n","length","tool","vel","append","el","push","requestUpdate","getFlag","getName","update","opt","render","cid","isVisible","mount","blurTool","focusTool","focusedTool","show","hide","blurredTool","onRemove","remove","layer","TOOLS","z","paper","getLayerView","insertSortedNode","appendChild"],"sources":["C:/Users/Admin/dataflow-test/node_modules/jointjs/src/dia/ToolsView.mjs"],"sourcesContent":["import * as mvc from '../mvc/index.mjs';\nimport * as util from '../util/index.mjs';\nimport { CellView } from './CellView.mjs';\nimport { LayersNames } from './PaperLayer.mjs';\nimport { ToolView } from './ToolView.mjs';\n\nexport const ToolsView = mvc.View.extend({\n    tagName: 'g',\n    className: 'tools',\n    svgElement: true,\n    tools: null,\n    isRendered: false,\n    options: {\n        tools: null,\n        relatedView: null,\n        name: null,\n        // layer?: LayersNames.TOOLS\n        // z?: number\n    },\n\n    configure: function(options) {\n        options = util.assign(this.options, options);\n        var tools = options.tools;\n        if (!Array.isArray(tools)) return this;\n        var relatedView = options.relatedView;\n        if (!(relatedView instanceof CellView)) return this;\n        var views = this.tools = [];\n        for (var i = 0, n = tools.length; i < n; i++) {\n            var tool = tools[i];\n            if (!(tool instanceof ToolView)) continue;\n            tool.configure(relatedView, this);\n            this.vel.append(tool.el);\n            views.push(tool);\n        }\n        this.isRendered = false;\n        relatedView.requestUpdate(relatedView.getFlag('TOOLS'));\n        return this;\n    },\n\n    getName: function() {\n        return this.options.name;\n    },\n\n    update: function(opt) {\n\n        opt || (opt = {});\n        var tools = this.tools;\n        if (!tools) return this;\n        var isRendered = this.isRendered;\n        for (var i = 0, n = tools.length; i < n; i++) {\n            var tool = tools[i];\n            if (!isRendered) {\n                // First update executes render()\n                tool.render();\n            } else if (opt.tool !== tool.cid && tool.isVisible()) {\n                tool.update();\n            }\n        }\n        if (!isRendered) {\n            this.mount();\n            // Make sure tools are visible (if they were hidden and the tool removed)\n            this.blurTool();\n            this.isRendered = true;\n        }\n        return this;\n    },\n\n    focusTool: function(focusedTool) {\n\n        var tools = this.tools;\n        if (!tools) return this;\n        for (var i = 0, n = tools.length; i < n; i++) {\n            var tool = tools[i];\n            if (focusedTool === tool) {\n                tool.show();\n            } else {\n                tool.hide();\n            }\n        }\n        return this;\n    },\n\n    blurTool: function(blurredTool) {\n        var tools = this.tools;\n        if (!tools) return this;\n        for (var i = 0, n = tools.length; i < n; i++) {\n            var tool = tools[i];\n            if (tool !== blurredTool && !tool.isVisible()) {\n                tool.show();\n                tool.update();\n            }\n        }\n        return this;\n    },\n\n    hide: function() {\n        return this.focusTool(null);\n    },\n\n    show: function() {\n        return this.blurTool(null);\n    },\n\n    onRemove: function() {\n        var tools = this.tools;\n        if (!tools) return this;\n        for (var i = 0, n = tools.length; i < n; i++) {\n            tools[i].remove();\n        }\n        this.tools = null;\n    },\n\n    mount: function() {\n        const { options, el } = this;\n        const { relatedView, layer = LayersNames.TOOLS, z } = options;\n        if (relatedView) {\n            if (layer) {\n                relatedView.paper.getLayerView(layer).insertSortedNode(el, z);\n            } else {\n                relatedView.el.appendChild(el);\n            }\n        }\n        return this;\n    }\n\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}